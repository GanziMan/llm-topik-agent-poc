# TOPIK μ“°κΈ° μλ™ μ±„μ  μ‹μ¤ν… (Multi-Agent Architecture)

Google ADK(Agent Development Kit) ν™κ²½μ— νΉν™”λ TOPIK(ν•κµ­μ–΄λ¥λ ¥μ‹ν—) μ“°κΈ° μλ™ μ±„μ  μ‹μ¤ν…μ…λ‹λ‹¤.

## π“‹ μ‹μ¤ν… κ°μ”

TOPIK 51-54λ² μ“°κΈ° λ¬Έν•­μ„ λ¬Έν•­ μ ν•λ³„λ΅ μ „λ¬Έν™”λ μ—μ΄μ „νΈκ°€ μ±„μ ν•λ” λ©€ν‹°-μ—μ΄μ „νΈ μ•„ν‚¤ν…μ²μ…λ‹λ‹¤.

### μ§€μ› λ¬Έν•­

- **51-52λ²**: λ‹΄ν™” μ™„μ„± (λΉμΉΈ γ‰ , γ‰΅ μ±„μ°κΈ°) - κ° 10μ 
- **53λ²**: μ„¤λ…λ¬Έ μ‘μ„± (200~300μ) - 30μ 
- **54λ²**: λ…Όμ λ¬Έ μ‘μ„± (600~700μ) - 50μ 

## π—οΈ μ•„ν‚¤ν…μ² κµ¬μ΅°

```
topik_writer_grader/
β”β”€β”€ prompts.py          # λ¨λ“  ν”„λ΅¬ν”„νΈ μ¤‘μ•™ κ΄€λ¦¬
β”β”€β”€ agent.py           # μ¤μΌ€μ¤νΈλ μ΄ν„° μ—μ΄μ „νΈ (λ©”μΈ)
β”β”€β”€ utils.py           # μ ν‹Έλ¦¬ν‹° ν•¨μλ“¤
β””β”€β”€ sub_agents/        # μ „λ¬Έ μ±„μ  μ—μ΄μ „νΈλ“¤
    β”β”€β”€ grader_51_52/  # 51-52λ² λ‹΄ν™” μ™„μ„± μ „λ‹΄
    β”β”€β”€ grader_53/     # 53λ² μ„¤λ…λ¬Έ μ „λ‹΄
    β””β”€β”€ grader_54/     # 54λ² λ…Όμ λ¬Έ μ „λ‹΄
```

## π€ μ‚¬μ© λ°©λ²•

### κΈ°λ³Έ μ‚¬μ©λ²•

```python
from topik_writer_grader.agent import OrchestratorAgent

# μ¤μΌ€μ¤νΈλ μ΄ν„° μ—μ΄μ „νΈ μ΄κΈ°ν™”
orchestrator = OrchestratorAgent()

# μ±„μ  μν–‰
result = orchestrator.grade(
    question_number=53,
    question_prompt="λ‹¤μ μλ£λ¥Ό λ³΄κ³  'ν΄λ€ν°μ κΈ°λ¥ λ³€ν™”'μ— λ€ν• κΈ€μ„ 200~300μλ΅ μ“°μ‹­μ‹μ¤.",
    answer_text="μµκ·Ό ν΄λ€ν°μ€ κ³Όκ±°μ™€ λ‹¬λ¦¬ λ§μ€ κΈ°λ¥ λ³€ν™”λ¥Ό λ³΄μ€λ‹¤..."
)

print(result)
```

### ν„°λ―Έλ„μ—μ„ ν…μ¤νΈ

```bash
cd api/poc-agent
python -m topik_writer_grader.agent
```

## π“ μ±„μ  κ²°κ³Ό κµ¬μ΅°

```json
{
  "μ μ": {
    "γ‰ _λΉμΉΈ": 5, // 51-52λ²λ§
    "γ‰΅_λΉμΉΈ": 5, // 51-52λ²λ§
    "λ‚΄μ©_κ³Όμ μν–‰": 7, // 53-54λ²λ§
    "μ „κ°_κµ¬μ΅°": 7, // 53-54λ²λ§
    "μ–Έμ–΄_μ‚¬μ©": 16 // 53-54λ²λ§
  },
  "μ΄μ ": 10,
  "κ°•μ ": ["κµ¬μ²΄μ  κ°•μ  μ‚¬ν•­λ“¤"],
  "μ•½μ ": ["κ°μ„  ν•„μ” μ‚¬ν•­λ“¤"],
  "κ°μ„ _λ°©μ•": ["κµ¬μ²΄μ  κ°μ„  λ°©λ²•λ“¤"],
  "μ΄ν‰": "μΆ…ν•©μ μΈ ν‰κ°€",
  "κΈ€μμ": 245, // 53-54λ²λ§
  "κΈ€μμ_ν‰κ°€": "μ μ • λ²”μ„ λ‚΄ (200~300μ)" // 53-54λ²λ§
}
```

## β™οΈ μ£Όμ” κΈ°λ¥

### 1. λ©€ν‹°-μ—μ΄μ „νΈ μ•„ν‚¤ν…μ²

- λ¬Έν•­ μ ν•λ³„ μ „λ¬Έν™”λ μ±„μ  μ—μ΄μ „νΈ
- μ¤μΌ€μ¤νΈλ μ΄ν„° ν¨ν„΄μΌλ΅ μ μ ν• μ—μ΄μ „νΈ λΌμ°ν…
- κ° μ—μ΄μ „νΈλ³„ λ…λ¦½μ μΈ ν”„λ΅¬ν”„νΈ κ΄€λ¦¬

### 2. μ •κµν• μ±„μ  κΈ°μ¤€

- TOPIK κ³µμ‹ μ±„μ  κΈ°μ¤€ μ™„μ „ λ°μ
- λ¬Έν•­λ³„ μ„Έλ¶„ν™”λ λ£¨λΈλ¦­ μ μ©
- μμ‹ μ‘λ‹µμ„ ν†µν• μ±„μ  μΌκ΄€μ„± ν™•λ³΄

### 3. μ…λ ¥ κ²€μ¦ λ° μ—λ¬ μ²λ¦¬

- λ¬Έν•­ λ²νΈ, μ§λ¬Έ, λ‹µμ• μ ν¨μ„± κ²€μ¦
- μ μ λ²”μ„ μλ™ κ²€μ¦
- μƒμ„Έν• μ—λ¬ λ©”μ‹μ§€ μ κ³µ

### 4. μ ν‹Έλ¦¬ν‹° κΈ°λ¥

- μ •ν™•ν• ν•κµ­μ–΄ κΈ€μμ κ³„μ‚°
- λ¬Έν•­λ³„ κΈ€μμ λ²”μ„ ν‰κ°€
- κ²°κ³Ό ν¬λ§·ν… κΈ°λ¥

## π“ νμΌλ³„ μƒμ„Έ

### `prompts.py`

- μ—­ν• , μ‹μ¤ν…, μ»¨ν…μ¤νΈ ν”„λ΅¬ν”„νΈ μ¤‘μ•™ κ΄€λ¦¬
- λ¬Έν•­λ³„ μ±„μ  κΈ°μ¤€ λ° μμ‹ μ‘λ‹µ ν¬ν•¨
- ν”„λ΅¬ν”„νΈ ν…ν”λ¦Ώ μ κ³µ

### `agent.py` (μ¤μΌ€μ¤νΈλ μ΄ν„°)

- λ©”μΈ μ±„μ  λ΅μ§ λ° λΌμ°ν…
- μ…λ ¥ κ²€μ¦ λ° μ—λ¬ μ²λ¦¬
- κ²°κ³Ό ν›„μ²λ¦¬ λ° κ²€μ¦

### `utils.py`

- κΈ€μμ κ³„μ‚° λ° ν‰κ°€
- μ μ μ ν¨μ„± κ²€μ¦
- ν”„λ΅¬ν”„νΈ μ΅°ν•© κΈ°λ¥
- κ²°κ³Ό ν¬λ§·ν…

### `sub_agents/*/agent.py`

- κ° λ¬Έν•­ μ ν•λ³„ μ „λ¬Έ μ±„μ  λ΅μ§
- ν•΄λ‹Ή λ¬Έν•­μ ν”„λ΅¬ν”„νΈ μ΅°ν•©
- ν”λ μ΄μ¤ν™€λ” μ‘λ‹µ (μ‹¤μ  LLM μ—°λ™ λ€κΈ°)

## π”§ Google ADK μ—°λ™ μ¤€λΉ„μ‚¬ν•­

ν„μ¬λ” ν”λ μ΄μ¤ν™€λ” μ‘λ‹µμ„ λ°ν™ν•λ„λ΅ κµ¬ν„λμ–΄ μμµλ‹λ‹¤.
μ‹¤μ  Google ADK μ—°λ™μ„ μ„ν•΄μ„λ” κ° ν•μ„ μ—μ΄μ „νΈμ `run` λ©”μ†λ“μ—μ„:

1. `utils.combine_prompts()`λ¥Ό μ‚¬μ©ν•μ—¬ μµμΆ… ν”„λ΅¬ν”„νΈ μƒμ„±
2. Google ADKλ¥Ό ν†µν•΄ LLM νΈμ¶
3. μ‘λ‹µ νμ‹± λ° JSON κµ¬μ΅°ν™”
4. `utils.validate_score_range()`λ΅ μ μ κ²€μ¦
